import{S as i,l as u}from"./vendor.a5d20ae4.js";const m=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerpolicy&&(l.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?l.credentials="include":e.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(e){if(e.ep)return;e.ep=!0;const l=r(e);fetch(e.href,l)}};m();let s;const d={rows:3,cols:5,start:4,volumeStep:6};let a={default:{cnname:"\u9ED8\u8BA4\u94A2\u7434",urls:{C4:"c4.mp3",C5:"c5.mp3",C6:"c6.mp3","D#4":"ds4.mp3","D#5":"ds5.mp3","F#4":"fs4.mp3","F#5":"fs5.mp3",A4:"a4.mp3",A5:"a5.mp3"},baseUrl:"./salamander/"},salamander:{cnname:"\u94A2\u74341",urls:{C4:"c4.mp3",C5:"c5.mp3",C6:"c6.mp3","D#4":"ds4.mp3","D#5":"ds5.mp3","F#4":"fs4.mp3","F#5":"fs5.mp3",A4:"a4.mp3",A5:"a5.mp3"},baseUrl:"./salamander/"},upright:{cnname:"\u94A2\u74342",urls:{C4:"C4vL.wav",C5:"C5vL.wav",C6:"C6vL.wav","F#4":"Fs4vL.wav","F#5":"Fs5vL.wav"},baseUrl:"./upright/"},honkeytank:{cnname:"\u9152\u5427\u94A2\u7434",urls:{C4:"C4.wav",C5:"C5.wav",G4:"G4.wav",G5:"G5.wav"},baseUrl:"./honkeytank/"},clarinet:{cnname:"\u5355\u7C27",urls:{D4:"D4.wav",D5:"D5.wav"},baseUrl:"./clarinet/"},guitar:{cnname:"\u5409\u4ED6",urls:{C4:"C4.wav",C5:"C5.wav",C6:"C6.wav",F4:"F4.wav",F5:"F5.wav"},baseUrl:"./guitar/"},ocarina:{cnname:"\u7B1B",urls:{C4:"C4.wav",E6:"E6.wav",A6:"A6.wav"},baseUrl:"./ocarina/"},voice:{cnname:"\u5C81\u5C81",urls:{C4:"hen2.mp3"},baseUrl:"./voice/"}};class p{constructor(t,r,o){this.n_rows=t,this.n_cols=r,this.keyRows={};for(let e=0;e<t;e++){this.keyRows[e]=[];for(let l=0;l<r;l++)this.keyRows[e].push(v(e*r+l,o))}}}class f{constructor(t,r,o){this.container=t,this.container.innerHTML="";for(let e=0;e<Object.keys(r).length;e++){for(let l=0;l<r[e].length;l++)t.appendChild(g(r[e][l],y(l)));t.appendChild(document.createElement("br"))}}}function v(n,t){return["c","d","e","f","g","a","b"][n%7]+(t+Math.floor(n/7))}function g(n,t){let r=n[0];n[1];let o=document.createElement("button");return o.classList.add("pianokey"),o.id=n,o.style.backgroundImage='url("./svgs/square.svg")',t&&(o.style.backgroundImage='url("./svgs/circle.svg")'),r==="c"&&(o.style.backgroundImage='url("./svgs/circle_in_square.svg")'),o}document.addEventListener("pointerover",n=>{let t=n.target;if(t.classList.contains("pianokey")){console.log(t.id);let r=t.id;s.triggerAttack(r,"+0",1)}});document.addEventListener("pointerout",n=>{let t=n.target;if(t.classList.contains("pianokey")){console.log(t.id);let r=t.id;s.triggerRelease(r,"+0.7")}});function y(n){return n%2==0}function C(){!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen&&document.documentElement.mozRequestFullScreen())}function h(n,t,r,o){s=new i(o).toDestination(),u().then(()=>{let e=new p(n,t,r);new f(document.querySelector("#app"),e.keyRows),document.querySelector("#instrumentListContainer").appendChild(k())})}let w=document.querySelector("#togglefs"),E=document.querySelector("#chinstrument"),L=document.querySelector("#increasevol");w.addEventListener("click",n=>{C()});L.addEventListener("click",n=>{s.volume.value+=d.volumeStep,alert("\u97F3\u91CF\u5DF2\u589E\u52A0")});E.addEventListener("click",n=>{document.querySelector("#instrumentListContainer").hidden=!1});function k(){let n=document.createElement("ol"),t=Object.keys(a);for(const r of t){let o=document.createElement("li");o.innerText=a[r].cnname,o.style.marginBottom="30px",o.addEventListener("pointerdown",e=>{s=new i(a[r]).toDestination(),document.querySelector("#instrumentListContainer").hidden=!0}),n.appendChild(o)}return n}h(3,5,4,a.default);
