import{S as a,l as u}from"./vendor.a5d20ae4.js";const m=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=o(e);fetch(e.href,r)}};m();let s;const d={rows:3,cols:5,start:4,volumeStep:6};let c={salamander:{cnname:"\u94A2\u74341",urls:{C4:"c4.mp3",C5:"c5.mp3",C6:"c6.mp3"},baseUrl:"./salamander/"},upright:{cnname:"\u94A2\u74342",urls:{C4:"C4vL.wav",C5:"C5vL.wav",C6:"C6vL.wav"},baseUrl:"./upright/"},honkeytank:{cnname:"\u9152\u5427\u94A2\u7434",urls:{C4:"C4.wav",C5:"C5.wav"},baseUrl:"./honkeytank/"},clarinet:{cnname:"\u5355\u7C27",urls:{D4:"D4.wav",D5:"D5.wav"},baseUrl:"./clarinet/"},guitar:{cnname:"\u5409\u4ED6",urls:{C4:"C4.wav",C5:"C5.wav",C6:"C6.wav",F4:"F4.wav",F5:"F5.wav"},baseUrl:"./guitar/"},ocarina:{cnname:"\u7B1B",urls:{C4:"C4.wav",E6:"E6.wav",A6:"A6.wav"},baseUrl:"./ocarina/"}};class f{constructor(l,o,n){this.n_rows=l,this.n_cols=o,this.keyRows={};for(let e=0;e<l;e++){this.keyRows[e]=[];for(let r=0;r<o;r++)this.keyRows[e].push(v(e*o+r,n))}}}class p{constructor(l,o,n){this.container=l,this.container.innerHTML="";for(let e=0;e<Object.keys(o).length;e++){for(let r=0;r<o[e].length;r++)l.appendChild(g(o[e][r],y(r)));l.appendChild(document.createElement("br"))}}}function v(t,l){return["c","d","e","f","g","a","b"][t%7]+(l+Math.floor(t/7))}function g(t,l){let o=t[0];t[1];let n=document.createElement("button");return n.classList=["pianokey"],n.style.backgroundImage='url("./svgs/square.svg")',l&&(n.style.backgroundImage='url("./svgs/circle.svg")'),o==="c"&&(n.style.backgroundImage='url("./svgs/circle_in_square.svg")'),n.addEventListener("pointerdown",e=>{console.log(t),s.triggerAttack(t,"+0",1)}),n.addEventListener("pointerup",e=>{s.triggerRelease(t,"+0.5")}),n}function y(t){return t%2==0}function h(){!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen&&document.documentElement.mozRequestFullScreen())}function C(t,l,o,n){s=new a(n).toDestination(),u().then(()=>{let e=new f(t,l,o);new p(document.querySelector("#app"),e.keyRows),document.querySelector("#instrumentListContainer").appendChild(k())})}let w=document.querySelector("#togglefs"),E=document.querySelector("#chinstrument"),L=document.querySelector("#increasevol");w.addEventListener("click",t=>{h()});L.addEventListener("click",t=>{s.volume.value+=d.volumeStep,alert("\u97F3\u91CF\u5DF2\u589E\u52A0")});E.addEventListener("click",t=>{document.querySelector("#instrumentListContainer").hidden=!1});function k(){let t=document.createElement("ol"),l=Object.keys(c);for(const o of l){let n=document.createElement("li");n.innerText=c[o].cnname,n.style.marginBottom="30px",n.addEventListener("pointerdown",e=>{s=new a(c[o]).toDestination(),document.querySelector("#instrumentListContainer").hidden=!0}),t.appendChild(n)}return t}C(3,5,4,c.salamander);
